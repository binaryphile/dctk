#!/usr/bin/env bash
# Usage: %s commands
# Summary: List all %s commands
# Help: This command is mostly used for autocompletion in various shells, and for `%s help`.

source kaizen.bash globals='array bring glob module sourced strict_mode trim_to_last'

main () {
  local libexec

  libexec=$(dirname -- "$(readlink -f -- "$BASH_SOURCE")")
  list_commands "$libexec" | uniq | sort
}

list_commands() {
  local libexec=$1
  local command

  shopt -s nullglob
  $glob "$libexec"/*
  $($array commands="$__")
  for command in "${commands[@]}"; do
    $trim_to_last / "$command"
    echo "$__"
  done
}

$sourced? && return
$strict_mode on
main "$@"
